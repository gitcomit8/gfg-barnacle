<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zombified Service Worker - PWA Caching Bug Demo">
    <title>Zombified Service Worker Demo</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6200ea">
</head>
<body>
    <div class="container">
        <header>
            <img src="logo.svg" alt="PWA Logo" class="logo" onerror="this.style.display='none'">
            <h1>Zombified Service Worker</h1>
            <p class="subtitle">PWA Caching Bug Demonstration</p>
        </header>

        <main>
            <section class="info-card">
                <h2>ğŸ§Ÿ Welcome to the Zombified Service Worker</h2>
                <p>This Progressive Web App demonstrates a subtle but critical bug in Service Worker caching.</p>
                <p class="version">Version: <strong id="app-version">1.0.0</strong></p>
            </section>

            <section class="bug-info">
                <h3>ğŸ› The Bug</h3>
                <p>The Service Worker's <code>activate</code> event properly clears old caches, but the <code>fetch</code> listener uses a stale cache key that was set when the file was first parsed.</p>
                <ul>
                    <li>âœ… Development mode works fine</li>
                    <li>âŒ Production serves old cached assets indefinitely</li>
                    <li>ğŸ”„ Only hard-reload updates the cache reference</li>
                </ul>
            </section>

            <section class="actions">
                <h3>Test the Bug</h3>
                <button id="checkCache" class="btn">Check Current Cache</button>
                <button id="updateVersion" class="btn btn-primary">Simulate Version Update</button>
                <button id="clearCache" class="btn btn-danger">Clear All Caches</button>
                <button id="unregister" class="btn btn-danger">Unregister Service Worker</button>
            </section>

            <section class="log-section">
                <h3>Activity Log</h3>
                <div id="log" class="log"></div>
            </section>
        </main>

        <footer>
            <p>Service Worker Status: <span id="sw-status" class="status-badge">Checking...</span></p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
